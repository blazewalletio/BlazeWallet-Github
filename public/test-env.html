<!DOCTYPE html>
<html>
<head>
    <title>Env Var Test</title>
</head>
<body>
    <h1>Environment Variables Test</h1>
    <div id="output"></div>
    
    <script>
        console.log('ðŸ” BROWSER ENV TEST');
        console.log('window location:', window.location.href);
        
        // Try to fetch the main page and extract env vars
        fetch('/')
            .then(res => res.text())
            .then(html => {
                console.log('HTML loaded, length:', html.length);
                
                // Look for script tags with env vars
                const matches = html.match(/NEXT_PUBLIC_SUPABASE/g);
                console.log('Found NEXT_PUBLIC_SUPABASE mentions:', matches ? matches.length : 0);
                
                // Check for __NEXT_DATA__
                const nextDataMatch = html.match(/<script id="__NEXT_DATA__"[^>]*>([^<]+)<\/script>/);
                if (nextDataMatch) {
                    try {
                        const nextData = JSON.parse(nextDataMatch[1]);
                        console.log('__NEXT_DATA__ parsed:', {
                            hasProps: !!nextData.props,
                            hasEnv: !!nextData.props?.pageProps?.env,
                        });
                    } catch (e) {
                        console.error('Failed to parse __NEXT_DATA__:', e);
                    }
                }
                
                document.getElementById('output').innerHTML = `
                    <h2>Results:</h2>
                    <pre>${JSON.stringify({
                        'HTML length': html.length,
                        'SUPABASE mentions': matches ? matches.length : 0,
                    }, null, 2)}</pre>
                `;
            })
            .catch(err => {
                console.error('Fetch error:', err);
                document.getElementById('output').innerHTML = '<p style="color:red">Error: ' + err.message + '</p>';
            });
    </script>
</body>
</html>

